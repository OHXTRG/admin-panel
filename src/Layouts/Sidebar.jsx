import React from "react";
import {
  List,
  ListItemButton,
  ListItemIcon,
  ListItemText,
  Box,
  Button,
} from "@mui/material";
import AuthHeader from "../components/Headers/AuthHeader";
import { useLocation, useNavigate } from "react-router";
import logoImg from "../assets/logo.png";
import { useDispatch } from "react-redux";
import { logout } from "../features/user.slice";

const DashboardSVG = (color) => {
  return (
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M9 3H4C3.44772 3 3 3.44772 3 4V11C3 11.5523 3.44772 12 4 12H9C9.55228 12 10 11.5523 10 11V4C10 3.44772 9.55228 3 9 3Z"
        stroke={color}
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
      <path
        d="M20 3H15C14.4477 3 14 3.44772 14 4V7C14 7.55228 14.4477 8 15 8H20C20.5523 8 21 7.55228 21 7V4C21 3.44772 20.5523 3 20 3Z"
        stroke={color}
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
      <path
        d="M20 12H15C14.4477 12 14 12.4477 14 13V20C14 20.5523 14.4477 21 15 21H20C20.5523 21 21 20.5523 21 20V13C21 12.4477 20.5523 12 20 12Z"
        stroke={color}
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
      <path
        d="M9 16H4C3.44772 16 3 16.4477 3 17V20C3 20.5523 3.44772 21 4 21H9C9.55228 21 10 20.5523 10 20V17C10 16.4477 9.55228 16 9 16Z"
        stroke={color}
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
    </svg>
  );
};
const WorkoutSVG = (color) => {
  return (
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <g clip-path="url(#clip0_308_2605)">
        <path
          d="M17.6114 13.466C18.0286 13.8832 18.5945 14.1176 19.1845 14.1176C19.7745 14.1176 20.3404 13.8832 20.7576 13.466C21.1748 13.0488 21.4092 12.483 21.4092 11.8929C21.4092 11.3029 21.1748 10.7371 20.7576 10.3199L18.7914 8.35474C19.2086 8.77181 19.7744 9.00605 20.3643 9.00594C20.6564 9.00589 20.9456 8.94831 21.2155 8.83648C21.4853 8.72465 21.7305 8.56077 21.937 8.35419C22.1435 8.14761 22.3073 7.90237 22.419 7.63249C22.5308 7.36261 22.5883 7.07336 22.5882 6.78126C22.5882 6.48916 22.5306 6.19994 22.4187 5.93009C22.3069 5.66025 22.143 5.41507 21.9365 5.20857L18.7914 2.0635C18.3743 1.64629 17.8086 1.41185 17.2187 1.41174C16.6288 1.41164 16.063 1.64588 15.6458 2.06294C15.2286 2.48001 14.9941 3.04572 14.994 3.63564C14.9939 4.22556 15.2281 4.79136 15.6452 5.20857L13.6801 3.24234C13.4735 3.03576 13.2283 2.87189 12.9584 2.76009C12.6884 2.64829 12.3992 2.59075 12.107 2.59075C11.8149 2.59075 11.5256 2.64829 11.2557 2.76009C10.9857 2.87189 10.7405 3.03576 10.5339 3.24234C10.3273 3.44893 10.1635 3.69417 10.0517 3.96408C9.93987 4.23399 9.88232 4.52328 9.88232 4.81543C9.88232 5.10758 9.93987 5.39687 10.0517 5.66678C10.1635 5.93669 10.3273 6.18194 10.5339 6.38852L17.6114 13.466Z"
          stroke={color}
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M1.41174 22.5883L2.82351 21.1765"
          stroke={color}
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M21.1765 2.82351L22.5883 1.41174"
          stroke={color}
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M5.20857 21.9365C5.62563 22.3537 6.19134 22.5881 6.78126 22.5882C7.07336 22.5883 7.36261 22.5308 7.63249 22.419C7.90237 22.3073 8.14761 22.1435 8.35419 21.937C8.56077 21.7305 8.72465 21.4853 8.83648 21.2155C8.94831 20.9456 9.00589 20.6564 9.00594 20.3643C9.006 20.0722 8.94851 19.783 8.83678 19.5131C8.72505 19.2432 8.56125 18.998 8.35474 18.7914L10.3199 20.7576C10.7371 21.1748 11.3029 21.4092 11.8929 21.4092C12.483 21.4092 13.0488 21.1748 13.466 20.7576C13.8832 20.3404 14.1176 19.7745 14.1176 19.1845C14.1176 18.5945 13.8832 18.0286 13.466 17.6114L6.38852 10.5339C6.18194 10.3273 5.93669 10.1635 5.66678 10.0517C5.39687 9.93987 5.10758 9.88232 4.81543 9.88232C4.52328 9.88232 4.23399 9.93987 3.96408 10.0517C3.69417 10.1635 3.44893 10.3273 3.24234 10.5339C3.03576 10.7405 2.87189 10.9857 2.76009 11.2557C2.64829 11.5256 2.59075 11.8149 2.59075 12.107C2.59075 12.3992 2.64829 12.6884 2.76009 12.9584C2.87189 13.2283 3.03576 13.4735 3.24234 13.6801L5.20857 15.6452C4.79136 15.2281 4.22556 14.9939 3.63564 14.994C3.04572 14.9941 2.48001 15.2286 2.06294 15.6458C1.64588 16.063 1.41164 16.6288 1.41174 17.2187C1.41185 17.8086 1.64629 18.3743 2.0635 18.7914L5.20857 21.9365Z"
          stroke={color}
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M9.88232 14.1176L14.1176 9.88232"
          stroke={color}
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </g>
      <defs>
        <clipPath id="clip0_308_2605">
          <rect width="24" height="24" fill="white" />
        </clipPath>
      </defs>
    </svg>
  );
};
const ExerciseSVG = (color) => {
  return (
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M16 13L21.223 16.482C21.2983 16.5321 21.3858 16.5609 21.4761 16.5652C21.5664 16.5695 21.6563 16.5493 21.736 16.5066C21.8157 16.4639 21.8824 16.4004 21.9289 16.3228C21.9754 16.2452 22 16.1565 22 16.066V7.87002C22 7.78204 21.9768 7.69562 21.9328 7.61947C21.8887 7.54332 21.8253 7.48014 21.7491 7.43632C21.6728 7.3925 21.5863 7.36958 21.4983 7.36988C21.4103 7.37017 21.324 7.39368 21.248 7.43802L16 10.5"
        stroke={color}
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
      <path
        d="M14 6H4C2.89543 6 2 6.89543 2 8V16C2 17.1046 2.89543 18 4 18H14C15.1046 18 16 17.1046 16 16V8C16 6.89543 15.1046 6 14 6Z"
        stroke={color}
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
    </svg>
  );
};
const SettingsSVG = (color) => {
  return (
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <g clip-path="url(#clip0_339_4827)">
        <path
          d="M21.825 13.6124L20.4 12.7874C20.4375 12.5624 20.4375 12.2999 20.4375 12C20.4375 11.7374 20.4375 11.4749 20.4 11.2125L21.825 10.3875C22.8 9.82495 23.1375 8.54995 22.575 7.57495L21.1125 5.02495C20.85 4.53745 20.4 4.19995 19.875 4.08745C19.35 3.93745 18.7875 4.01245 18.3 4.27495L16.875 5.13745C16.4625 4.83745 16.0125 4.57495 15.525 4.34995V2.69995C15.525 1.57495 14.5875 0.637451 13.4625 0.637451H10.5375C9.4125 0.637451 8.475 1.57495 8.475 2.69995V4.34995C7.9875 4.57495 7.5375 4.83745 7.125 5.09995L5.7 4.27495C5.2125 4.01245 4.6875 3.93745 4.125 4.08745C3.6 4.23745 3.15 4.57495 2.8875 5.02495L1.425 7.57495C0.862496 8.54995 1.2 9.82495 2.175 10.3875L3.6 11.2125C3.5625 11.4374 3.5625 11.7 3.5625 12C3.5625 12.2625 3.5625 12.5249 3.6 12.7874L2.175 13.6124C1.2 14.1749 0.862496 15.4499 1.425 16.4249L2.8875 18.9749C3.15 19.4624 3.6 19.7999 4.125 19.9124C4.65 20.0624 5.2125 19.9874 5.7 19.7249L7.125 18.9C7.5375 19.1999 7.9875 19.4625 8.475 19.65V21.2999C8.475 22.4249 9.4125 23.3624 10.5375 23.3624H13.4625C14.5875 23.3624 15.525 22.4249 15.525 21.2999V19.65C16.0125 19.4249 16.4625 19.1624 16.875 18.8624L18.3 19.6874C18.7875 19.9499 19.3125 20.025 19.8375 19.8749C20.3625 19.7249 20.8125 19.3874 21.075 18.9374L22.5375 16.3875C23.1 15.4124 22.7625 14.1749 21.825 13.6124ZM21.1125 15.5624L19.65 18.1124C19.6125 18.1874 19.5375 18.2624 19.425 18.2624C19.3125 18.2999 19.2375 18.2624 19.1625 18.2249L17.6625 17.3624C17.1 17.025 16.425 17.0625 15.9 17.4375C15.5625 17.6999 15.1875 17.8874 14.775 18.0749C14.2125 18.3375 13.8375 18.8999 13.8375 19.5374V21.2624C13.8375 21.4499 13.6875 21.6374 13.4625 21.6374H10.5375C10.35 21.6374 10.1625 21.4874 10.1625 21.2624V19.5374C10.1625 18.8999 9.7875 18.3375 9.225 18.0749C8.8125 17.8874 8.4375 17.6624 8.1 17.4375C7.8375 17.25 7.5 17.1374 7.1625 17.1374C6.8625 17.1374 6.6 17.2125 6.375 17.3624L4.875 18.2249C4.8 18.2624 4.6875 18.2999 4.6125 18.2624C4.5375 18.2249 4.4625 18.1874 4.3875 18.1124L2.925 15.5624C2.8125 15.3749 2.8875 15.15 3.0375 15.075L4.5375 14.2125C5.0625 13.9125 5.4 13.275 5.325 12.6749C5.2875 12.4874 5.2875 12.2624 5.2875 12.0374C5.2875 11.7749 5.2875 11.5875 5.325 11.4C5.4 10.7625 5.1 10.1624 4.5375 9.86245L3.0375 8.99995C2.85 8.88745 2.8125 8.66245 2.8875 8.51245L4.35 5.96245C4.3875 5.88745 4.4625 5.81245 4.575 5.81245C4.6875 5.77495 4.7625 5.81245 4.8375 5.84995L6.3375 6.71245C6.9 7.04995 7.575 7.01245 8.1 6.63745C8.4375 6.37495 8.8125 6.18745 9.225 5.99995C9.7875 5.73745 10.1625 5.17495 10.1625 4.53745V2.69995C10.1625 2.51245 10.3125 2.32495 10.5375 2.32495H13.4625C13.65 2.32495 13.8375 2.47495 13.8375 2.69995V4.42495C13.8375 5.06245 14.2125 5.62495 14.775 5.88745C15.1875 6.07495 15.5625 6.29995 15.9 6.52495C16.425 6.89995 17.1 6.93745 17.625 6.63745L19.125 5.77495C19.2 5.73745 19.3125 5.69995 19.3875 5.73745C19.4625 5.77495 19.5375 5.81245 19.6125 5.88745L21.075 8.43745C21.1875 8.62495 21.1125 8.84995 20.9625 8.92495L19.4625 9.78745C18.9375 10.0875 18.6 10.725 18.675 11.325C18.7125 11.5125 18.7125 11.7374 18.7125 11.9625C18.7125 12.2249 18.7125 12.4124 18.675 12.5999C18.6 13.2374 18.9375 13.8375 19.4625 14.1375L20.9625 14.9999C21.15 15.15 21.1875 15.3749 21.1125 15.5624Z"
          fill={color}
        />
        <path
          d="M12 7.16248C9.33748 7.16248 7.16248 9.33748 7.16248 12C7.16248 14.6625 9.33748 16.8375 12 16.8375C14.6625 16.8375 16.8375 14.6625 16.8375 12C16.8375 9.33748 14.6625 7.16248 12 7.16248ZM12 15.15C10.275 15.15 8.84998 13.725 8.84998 12C8.84998 10.275 10.275 8.84998 12 8.84998C13.725 8.84998 15.15 10.275 15.15 12C15.15 13.725 13.725 15.15 12 15.15Z"
          fill={color}
        />
        <path
          d="M12.6375 12.075V11.025C12.6375 10.575 12.2625 10.2 11.8125 10.2C11.3625 10.2 10.9875 10.575 10.9875 11.025V12.45C10.9875 12.675 11.0625 12.9 11.25 13.05L12.075 13.875C12.225 14.025 12.45 14.1375 12.675 14.1375C12.9 14.1375 13.125 14.0625 13.275 13.875C13.6125 13.5375 13.6125 13.0125 13.275 12.675L12.6375 12.075Z"
          fill={color}
        />
      </g>
      <defs>
        <clipPath id="clip0_339_4827">
          <rect width="24" height="24" fill="white" />
        </clipPath>
      </defs>
    </svg>
  );
};
const LogoutSVG = () => {
  return (
    <svg
      width="17"
      height="17"
      viewBox="0 0 17 17"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M8.49998 10.0673C8.81873 10.0673 9.11091 9.80166 9.11091 9.45635V1.32822C9.11091 1.00947 8.84529 0.717285 8.49998 0.717285C8.18123 0.717285 7.88904 0.98291 7.88904 1.32822V9.48291C7.9156 9.80166 8.18123 10.0673 8.49998 10.0673Z"
        fill="#111928"
      />
      <path
        d="M11.4484 2.57675C11.1562 2.44394 10.7844 2.57675 10.6516 2.86894C10.5187 3.16113 10.6516 3.533 10.9438 3.66581C13.0688 4.62206 14.45 6.77362 14.45 9.11112C14.45 12.4049 11.7672 15.0877 8.47344 15.0877C5.17969 15.0877 2.52344 12.4049 2.52344 9.11112C2.52344 6.77362 3.90469 4.64863 6.02969 3.66581C6.32188 3.533 6.45469 3.18769 6.32187 2.86894C6.18906 2.57675 5.84375 2.44394 5.525 2.57675C3.00156 3.7455 1.32812 6.2955 1.32812 9.11112C1.32812 13.0689 4.54219 16.283 8.5 16.283C12.4578 16.283 15.6719 13.0689 15.6719 9.11112C15.6719 6.2955 13.9984 3.7455 11.4484 2.57675Z"
        fill="#111928"
      />
    </svg>
  );
};

function Sidebar() {
  const navigate = useNavigate();
  const location = window.location.href;
  const { pathname } = useLocation();
  const homePageUrl = location.endsWith(pathname)
    ? location.slice(0, -pathname.length)
    : location;

  const dispatch = useDispatch();

  const getPage = (page) => {
    const currentPath = pathname?.split("/");
    let pageOpen = currentPath.pop();

    if (pageOpen === page) {
      return true;
    } else {
      return false;
    }
  };

  const navItems = [
    {
      label: "Dashboard",
      path: "dashboard",
      icon: DashboardSVG,
    },
    {
      label: "Workouts",
      path: "workouts",
      icon: WorkoutSVG,
    },
    {
      label: "Exercise Library",
      path: "exercises",
      icon: ExerciseSVG,
    },
    {
      label: "Settings",
      path: "settings",
      icon: SettingsSVG,
    },
  ];

  return (
    <Box
      className="sidebar"
      sx={{
        display: "flex",
        flexDirection: "column",
        justifyContent: "space-between",
        backgroundColor: "#FDFDFF",
        background: "linear-gradient(180deg, #FDFDFF 0%, #F3F6FF 100%)",
        boxShadow: "4px 0px 24px rgba(0, 0, 0, 0.08)",
        width: "270px",
      }}
    >
      <Box sx={{ flexGrow: "1" }}>
        <Box
          sx={{
            display: `flex`,
            justifyContent: `start`,
            alignItems: `center`,
            py: 2.2,
          }}
        >
          <Box
            component="a"
            href={homePageUrl}
            sx={{ height: "30px", width: "158px" }}
          >
            <img
              src={logoImg}
              alt="Gym-Gear"
              style={{ width: "100%", height: "100%", objectFit: "contain" }}
            />
          </Box>
        </Box>
        <List
          component="nav"
          aria-labelledby="nested-list-subheader"
          className={`sidebar-menu-list`}
          sx={{ padding: "20px" }}
        >
          {navItems.map((item, index) => (
            <ListItemButton
              key={index}
              onClick={() => {
                if (item.path !== "dashboard") {
                  navigate(`/admin/dashboard/${item.path}`);
                } else {
                  navigate(`/admin/dashboard`);
                }
              }}
              className={`list-item${getPage(item.path) ? " active" : ""}`}
              sx={
                getPage(item.path)
                  ? {
                      backgroundColor: "#3758F9",
                      color: "white",
                      borderRadius: "8px",
                      "&:hover": {
                        backgroundColor: "#2e4de6ff",
                        color: "white",
                      },
                    }
                  : {}
              }
            >
              <ListItemIcon className={`list-icon`}>
                {item.icon(getPage(item.path) ? "#FFFF" : "#202224")}
              </ListItemIcon>
              <ListItemText
                primary={item.label}
                className={item.path ? `list-text` : "`list-text`"}
              />
            </ListItemButton>
          ))}
        </List>
      </Box>

      <Box sx={{ borderTop: "1px solid #18181826" }}>
        <Button
          sx={{
            color: "black",
            display: "flex",
            gap: "4px",
            padding: "5px 0 5px 12px",
          }}
          onClick={() => {
            localStorage.removeItem("token");
            localStorage.removeItem("user");
            dispatch(logout());
          }}
        >
          {LogoutSVG()} Logout
        </Button>
      </Box>
    </Box>
  );
}

export default Sidebar;
